<div class="container">
  <div class="row">
    <div class="col w-100">
      <h3 class="login-form__title">Register</h3>
      <form class="login-form" [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputusername">Username</label>
            <input
              type="text"
              class="form-control"
              id="inputusername"
              required
              formControlName="username"
              [ngClass]="{ 'is-invalid': submitted && f.username.errors }"
            />
            <div
              *ngIf="submitted && f.username.errors"
              class="invalid-feedback"
            >
              <div *ngIf="f.username.errors.required">Username is required</div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="inputEmail">Email</label>
            <input
              type="text"
              class="form-control"
              id="inputEmail"
              placeholder="example@gmail.com"
              required
              formControlName="email"
              [ngClass]="{ 'is-invalid': submitted && f.email.errors }"
            />
            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
              <div *ngIf="f.email.errors.required">Email is required</div>
              <div *ngIf="f.email.errors.pattern">Invalid email pattern</div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputName">Name</label>
            <input
              type="text"
              class="form-control"
              id="inputName"
              formControlName="name"
              required
              [ngClass]="{ 'is-invalid': submitted && f.name.errors }"
            />
            <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
              <div *ngIf="f.name.errors.required">Name is required</div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="inputSurname">Surname</label>
            <input
              type="text"
              class="form-control"
              id="inputSurname"
              required
              formControlName="surname"
              [ngClass]="{ 'is-invalid': submitted && f.surname.errors }"
            />
            <div *ngIf="submitted && f.surname.errors" class="invalid-feedback">
              <div *ngIf="f.surname.errors.required">Surname is required</div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="inputAddress">Address</label>
          <input
            type="text"
            class="form-control"
            id="inputAddress"
            placeholder="1234 Main St"
            required
            formControlName="address"
            [ngClass]="{ 'is-invalid': submitted && f.address.errors }"
          />
          <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
            <div *ngIf="f.address.errors.required">Address is required</div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputCity">City</label>
            <input
              type="text"
              class="form-control"
              id="inputCity"
              required
              formControlName="city"
              [ngClass]="{ 'is-invalid': submitted && f.city.errors }"
            />
            <div *ngIf="submitted && f.city.errors" class="invalid-feedback">
              <div *ngIf="f.city.errors.required">City is required</div>
            </div>
          </div>
          <div class="form-group col-md-4">
            <label for="inputState">State</label>
            <select
              id="inputState"
              class="form-control"
              required
              formControlName="state"
              [ngClass]="{ 'is-invalid': submitted && f.state.errors }"
            >
              <option [ngValue]="null" selected>Choose...</option>
              <option *ngFor="let state of states$ | async">{{ state }}</option>
            </select>
            <div *ngIf="submitted && f.state.errors" class="invalid-feedback">
              <div *ngIf="f.state.errors.required">State is required</div>
            </div>
          </div>
          <div class="form-group col-md-2">
            <label for="inputZip">Zip</label>
            <input
              type="text"
              class="form-control"
              id="inputZip"
              placeholder="41000"
              required
              formControlName="zip"
              [ngClass]="{ 'is-invalid': submitted && f.zip.errors }"
              maxlength="5"
            />
            <div *ngIf="submitted && f.zip.errors" class="invalid-feedback">
              <div *ngIf="f.zip.errors.required">Zip is required</div>
              <div *ngIf="f.zip.errors.pattern">
                Invalid zip, numeric field only
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputPassword4">Password</label>
            <input
              type="password"
              class="form-control"
              id="inputPassword4"
              required
              formControlName="password"
              [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
            />
            <div
              *ngIf="submitted && f.password.errors"
              class="invalid-feedback"
            >
              <div *ngIf="f.password.errors.required">Password is required</div>
              <div *ngIf="f.password.errors.minlength">
                Minimun length required
                {{ f.password.errors.minlength.requiredLength }}
              </div>
              <div *ngIf="f.password.errors.pattern">
                Invalid formar, must containe at least lowercase, uppercase,
                number, special character and a minium length of 8
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="inputRepassword">Re-password</label>
            <input
              type="password"
              class="form-control"
              id="inputRepassword"
              required
              formControlName="repassword"
              [ngClass]="{ 'is-invalid': submitted && f.repassword.errors }"
            />
            <div
              *ngIf="submitted && f.repassword.errors"
              class="invalid-feedback"
            >
              <div *ngIf="f.repassword.errors.required">
                Repassword is required
              </div>
              <div *ngIf="f.repassword.errors.mustMatch">
                Repassword not match
              </div>
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
  </div>
</div>
